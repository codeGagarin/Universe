{% extends "base.html" %}
{% import 'macro.html' as lib %}
{% set caption = ("Diagnostic report on %s")|format(rpt._P().from) %}
{% block title %}{{ caption }}{% endblock %}
{% block head %}
    {{ super() }}
    <style type="text/css">
        .important { color: #336699; }
    </style>
{% endblock %}
{% block content %}
    <h1>{{caption}}</h1>

<nav aria-label="Page navigation">
  <ul class="pagination">
    {% for cap, params in rpt._N().items() %}
      <li><a href="{{ rpt.url_for('report', params) }}">{{ cap }}</a></li>
    {% endfor %}
  </ul>
</nav>

<table class="table">
    <thead>
        <tr>
            {% for c in rpt._D().header %}
            <th>Id</th>
            <th>Type</th>
            <th>Status</th>
            <th>Start</th>
            <th>Finish</th>
            <th>Duration</th>
            <th>Params</th>
            <th>Result</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for row in rpt._D().body %}
        <tr class=
        {% if row.status == 'warning' %} "warning"
        {% elif row.status == 'finish' %} "success"
        {% elif row.status == 'fail' %} "danger"
        {% else %} ""
        {% endif %}
        >

        <td align="right">{{ row.id }}</td>
        <td>{{ row.type }}</td>
        {% if row.status_detail %}
            <td align="center"><a href="{{ rpt.url_for('report', row.status_detail) }}">{{ row.status }}</a></td>
        {% else %}
            <td align="center">{{ row.status }}</td>
        {% endif %}
        <td align="center">{{ ("%s"|format(row.start))[11: 19] }}</td>
        <td align="center">{{ ("%s"|format(row.finish))[11: 19] }}</td>
        <td align="right">{{ row.duration }}</td>
        <td title="{{row.params}}">{{ (row.params if row.params else "")|escape()|truncate(40, True) }}</td>
        <td title="{{row.result}}">{{ (row.result if row.result else "")|escape()|truncate(50, True) }}</td></tr>
        {% endfor %}
    </tbody>
</table>
{{ lib.profile_stat(rpt, stat) }}
{% endblock %}